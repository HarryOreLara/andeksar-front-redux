
<p-confirmPopup></p-confirmPopup>



<p-sidebar
  [(visible)]="isContactSidebarVisible"
  position="left"
  (onHide)="onHide()"
  (onShow)="onShow()"
  [style]="{ width: '550px', 'font-size': '12px' }"
>
  <div class="flex flex-column h-full">
    <div class="surface-100 p-3 flex">
      <button
        pButton
        pRipple
        icon="pi pi-chevron-right"
        class="p-button-text p-button-rounded"
      ></button>
      <div class="border-right-1 border-300 mx-3"></div>
      <span
        class="text-900 text-xl font-medium inline-flex align-items-center ml-1"
        >Contactos del Cliente</span
      >
    </div>

    <form
      [formGroup]="contactosForm"
      class="flex-auto overflow-y-auto py-2 px-3 md:px-5"
    >
      <div formArrayName="contactos">
        <div
          class="grid formgrid p-fluid surface-card shadow-2 p-2 mb-3"
          *ngFor="let contactos of contactos.controls; let i = index"
          [formGroupName]="i"
        >
          <div class="field mt-3 col-12 md:col-6">
            <div class="flex align-items-center">
              <span class="p-float-label col-12">
                <input
                  id="documento"
                  type="text"
                  formControlName="documento"
                  autocomplete="off"
                  pInputText
                />
                <label class="ml-2" htmlFor="documento">Documento</label>
              </span>
            </div>
          </div>

          <div class="field mt-3 col-12 md:col-6">
            <div class="flex align-items-center">
              <span class="p-float-label col-12">
                <input
                  id="nombre"
                  type="text"
                  formControlName="nombre"
                  autocomplete="off"
                  pInputText
                />
                <label class="ml-2" htmlFor="nombre">Nombre Completo</label>
              </span>
            </div>
          </div>

          <div class="field mt-3 col-12 md:col-10">
            <div class="flex align-items-center">
              <span class="p-float-label col-12">
                <input
                  id="telefono"
                  type="text"
                  formControlName="telefono"
                  autocomplete="off"
                  pInputText
                />
                <label class="ml-2" htmlFor="telefono">Telefono</label>
              </span>
            </div>
          </div>

          <div class="field mt-3 col-12 md:col-2">
            <div class="flex align-items-center">
              <span class="p-float-label col-12">
                <button
                  pButton
                  pRipple
                  type="button"
                  (click)="
                    removeContacts($event, i, contactos.value.idContacto)
                  "
                  icon="pi pi-trash"
                  class="p-button-danger p-button-text p-button-rounded"
                ></button>
              </span>
            </div>
          </div>
        </div>
      </div>
    </form>

    <div
      *ngIf="!isNotError"
      class="flex align-items-center bg-red-50 text-red-600 text-sm p-2 border-round mb-4"
    >
      <i class="pi pi-check mr-2"></i>
      <span
        >Sucedio un problema con la api, por favor revise su conexion o contacte
        con un administrador</span
      >
    </div>
    <div class="border-top-1 surface-border p-3">
      <div class="flex align-items-center justify-content-between mb-3">
        <span class="text-900 font-medium"
          >Cantidad de  <span class="text-600 text-sm">Contactos</span></span
        >
        <span class="text-900 font-bold">8</span>
      </div>
      <button
        pButton
        pRipple
        icon="pi pi-plus"
        (click)="generateMoreContacts()"
        class="bg-blue-900 mb-3 w-full border-blue-900 text-white"
        label="Agregar Contacto"
      ></button>
      <button
        pButton
        pRipple
        icon="pi pi-save"
        class="p-button-outlined p-button-secondary w-full"
        label="Guardar"
        (click)="guardarContactos()"
      ></button>
    </div>
  </div>
</p-sidebar>
